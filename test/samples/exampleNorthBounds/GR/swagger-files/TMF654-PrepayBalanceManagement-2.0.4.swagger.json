{
  "basePath": "/tmf-api/prepayBalanceManagement/v2",
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "securityDefinitions": {
    "apix_oauth": {
      "type": "oauth2",
      "tokenUrl": "https://api.developer.com/v1/apixoauth2password/oauth2/token",
      "flow": "password",
      "scopes": {
        "PREPAY_BALANCE_MANAGEMENT_ALL": "API Consumer is allowed to consume all the operations.",
        "TMF654_PREPAY_BALANCE_MANAGEMENT_ALL": "API Consumer is allowed to consume all the operations."
      }
    }
  },
  "host": "api.developer.com",
  "info": {
    "description": "This is a sample representation of the Prepay Balance Management TMForum API. It is important to bear in mind that swagger 2.0 does not properly support polymorphism, so the link between the payment method details and its data types should be looked up in the API specification pdf file.",
    "title": "TMF654 Prepay Balance Management",
    "version": "2.0.4",
    "x-api-proxy-version": 1.1
  },
  "x-backend-connection-prod": "TBD",
  "x-backend-connection-preprod": "TBD",
  "x-backend-connection-basepath": "/tmf-api/prepayBalanceManagement/v2",
  "paths": {
    "/balanceTopup": {
      "post": {
        "operationId": "createNewTopup",
        "description": "Create a new top-up operation for a given product (or commercial id reference to a product) instance consuming the credit held in a bucket for a specific service).",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "TopupBody",
            "in": "body",
            "description": "The Topup to be created.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/BalanceTopupBody"
            },
            "x-example": {
              "application/json": {
                "type": "voice",
                "channel": {
                  "id": "channel1",
                  "href": "http://server:port/channel/channel1",
                  "name": "retail"
                },
                "amount": {
                  "amount": 10,
                  "units": "EUR"
                },
                "product": {
                  "id": "PRD1",
                  "href": "/productInventory/v1/product/PRD1",
                  "name": "Product name"
                }
              }
            }
          },
          {
            "name": "Content-Type",
            "description": "Type of data sent in the request.",
            "in": "header",
            "type": "string",
            "required": false,
            "x-example": "application/json"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "* Contains the APIX OAuth token as Bearer token.\n* Enables the developer application access to the request resource.\n* E.g. Authorization:Bearer FhNX09SlBO4G0XRzTPAGustXtsWi",
            "required": true,
            "type": "string",
            "x-example": "Bearer FhNX09SlBO4G0XRzTPAGustXtsWi"
          },
          {
            "name": "Accept",
            "in": "header",
            "description": "The Accept request HTTP header advertises which content types, expressed as MIME types, the client is able to understand.",
            "required": false,
            "type": "string",
            "x-example": "application/json"
          },
          {
            "name": "vf-trace-transaction-id",
            "in": "header",
            "description": "* Consumer specified unique transaction identifier.\n * Enables requests from consumers to be captured end to end.\n* If not provided in the request, one is generated by the backend.\n * Format: Case insensitive, RFC 2616.",
            "required": false,
            "type": "string",
            "x-example": "57072d7e-92d4-11e7-abc4-cec278b6b50a"
          },
          {
            "name": "vf_ext_bp_id",
            "in": "header",
            "description": "A unique use case ID used for logging and end-to-end tracing.",
            "required": false,
            "type": "string",
            "x-example": "688c911a-92d4-11e7-abc4-cec278b6b50a"
          },
          {
            "name": "vf-country-code",
            "in": "header",
            "description": "* The identifier of the requesting country.\n* Format: Two characters, ISO 3166-1 alpha2.\n * Required if this resource is consumed with an OAuth2 client credentials token",
            "required": false,
            "type": "string",
            "x-example": "GR"
          }
        ],
        "responses": {
          "201": {
            "description": "Successful top-up operation request (resource created)",
            "headers": {
              "location": {
                "description": "Location where to query the created topup",
                "type": "string"
              },
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "400": {
            "description": "Request Error",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "404": {
            "description": "Not Found",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "405": {
            "description": "Method not Allowed",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "409": {
            "description": "Conflict",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "500": {
            "description": "The server encountered an unexpected condition which prevented it from fulfilling the request",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          }
        },
        "summary": "Create a new top-up operation for a given product (or commercial id reference to a product) instance consuming the credit held in a bucket for a specific service) .",
        "tags": [
          "Balance TopUps Methods"
        ],
        "security": [
          {
            "apix_oauth": [
              "PREPAY_BALANCE_MANAGEMENT_ALL",
              "TMF654_PREPAY_BALANCE_MANAGEMENT_ALL"
            ]
          }
        ]
      },
      "get": {
        "operationId": "retrieveListTopUpOperations",
        "description": "Retrieve the list of top-up operations requested for a given product product (or commercial id reference to a product), filtered by given criteria. The response includes the details of all top-ups operations requested.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "product.id",
            "description": "Id of the product",
            "required": true,
            "in": "query",
            "type": "string",
            "x-example": "ml123"
          },
          {
            "name": "channel",
            "description": "Channel name",
            "required": false,
            "in": "query",
            "type": "string",
            "x-example": "retail"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "* Contains the APIX OAuth token as Bearer token.\n* Enables the developer application access to the request resource.\n* E.g. Authorization:Bearer FhNX09SlBO4G0XRzTPAGustXtsWi",
            "required": true,
            "type": "string",
            "x-example": "Bearer FhNX09SlBO4G0XRzTPAGustXtsWi"
          },
          {
            "name": "Accept",
            "in": "header",
            "description": "The Accept request HTTP header advertises which content types, expressed as MIME types, the client is able to understand.",
            "required": false,
            "type": "string",
            "x-example": "application/json"
          },
          {
            "name": "vf-trace-transaction-id",
            "in": "header",
            "description": "* Consumer specified unique transaction identifier.\n * Enables requests from consumers to be captured end to end.\n* If not provided in the request, one is generated by the backend.\n * Format: Case insensitive, RFC 2616.",
            "required": false,
            "type": "string",
            "x-example": "57072d7e-92d4-11e7-abc4-cec278b6b50a"
          },
          {
            "name": "vf_ext_bp_id",
            "in": "header",
            "description": "A unique use case ID used for logging and end-to-end tracing.",
            "required": false,
            "type": "string",
            "x-example": "688c911a-92d4-11e7-abc4-cec278b6b50a"
          }
        ],
        "responses": {
          "200": {
            "description": "TopUp request information was returned successfully",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/BalanceTopupRequest"
              }
            },
            "examples": {
              "application/json": [
                {
                  "type": "voice",
                  "channel": {
                    "id": "channel1",
                    "href": "http://server:port/channel/channel1",
                    "name": "retail"
                  },
                  "amount": {
                    "amount": 10,
                    "units": "EUR"
                  },
                  "product": {
                    "id": "12345",
                    "href": "/productInventory/v1/product/12345",
                    "name": "Product name"
                  },
                  "id": "TUPxxx01",
                  "href": "/balancemanagement/v1/balanceTopup/TUPxxx01",
                  "description": "description",
                  "requestor": {
                    "id": "osidfuod",
                    "href": "http://server:port/partyManagement/user/osidfuod",
                    "name": "John Recharger",
                    "role": "user"
                  },
                  "isAutoTopup": true,
                  "recurringPeriod": "monthly",
                  "nrOfPeriods": 10,
                  "paymentMethod": {
                    "id": "5",
                    "href": "http://servr:port/payMentMethod/v1/payMentMethod/5",
                    "name": "Main credit card",
                    "type": "credit card",
                    "details": {
                      "id": "missing documentation",
                      "href": "missing documentation",
                      "name": "missing documentation",
                      "role": "missing documentation"
                    }
                  },
                  "voucher": "voucher voice",
                  "validFor": {
                    "startDateTime": "2018-07-24T08:14:10.740Z",
                    "endDateTime": "2018-07-24T08:14:10.740Z"
                  },
                  "requestedDate": "10-02-2016",
                  "confirmationDate": "10-02-2016",
                  "status": "confirmed",
                  "bucket": {
                    "id": "BCKT11",
                    "href": "/balancemanagement/v1/bucket/BCKT11"
                  },
                  "partyAccount": {
                    "id": "ACC1",
                    "href": "/accountmanagement/v1/account/ACC1",
                    "name": "Party account name"
                  },
                  "relatedParty": [
                    {
                      "id": "cst1",
                      "href": "http://server:port/AccountManagement/customer/cst1",
                      "name": "customer",
                      "role": "John Doe"
                    }
                  ]
                }
              ]
            },
            "headers": {
              "X-Total-Count": {
                "description": "Total results",
                "type": "integer"
              },
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "400": {
            "description": "Request Error",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "405": {
            "description": "Method not Allowed",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "500": {
            "description": "The server encountered an unexpected condition which prevented it from fulfilling the request",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          }
        },
        "summary": "retrieve the list of top-up operations requested for a given product product (or commercial id reference to a product), filtered by given criteria. The response includes the details of all top-ups operations requested.",
        "tags": [
          "Balance TopUps Methods"
        ],
        "security": [
          {
            "apix_oauth": [
              "PREPAY_BALANCE_MANAGEMENT_ALL",
              "TMF654_PREPAY_BALANCE_MANAGEMENT_ALL"
            ]
          }
        ]
      }
    },
    "/product/{productId}/balanceTopup/{topupId}/status": {
      "put": {
        "operationId": "ModifyTopupStatusProduct",
        "description": "Update the information about a single top-up operation previously processed by the server.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "productId",
            "description": "Id of the product.",
            "required": true,
            "in": "path",
            "type": "string",
            "x-example": "ml123"
          },
          {
            "name": "topupId",
            "description": "Unique Identifier within the server for the recharge operation request",
            "required": true,
            "in": "path",
            "type": "string",
            "x-example": "top1"
          },
          {
            "name": "TopupBody",
            "in": "body",
            "description": "The Topup to be modify.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/BalanceTopupStatusTypeModify"
            },
            "x-example": {
              "application/json": {
                "status": "cancelled"
              }
            }
          },
          {
            "name": "Content-Type",
            "description": "Type of data sent in the request.",
            "in": "header",
            "type": "string",
            "required": false,
            "x-example": "application/json"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "* Contains the APIX OAuth token as Bearer token.\n* Enables the developer application access to the request resource.\n* E.g. Authorization:Bearer FhNX09SlBO4G0XRzTPAGustXtsWi",
            "required": true,
            "type": "string",
            "x-example": "Bearer FhNX09SlBO4G0XRzTPAGustXtsWi"
          },
          {
            "name": "Accept",
            "in": "header",
            "description": "The Accept request HTTP header advertises which content types, expressed as MIME types, the client is able to understand.",
            "required": false,
            "type": "string",
            "x-example": "application/json"
          },
          {
            "name": "vf-trace-transaction-id",
            "in": "header",
            "description": "* Consumer specified unique transaction identifier.\n * Enables requests from consumers to be captured end to end.\n* If not provided in the request, one is generated by the backend.\n * Format: Case insensitive, RFC 2616.",
            "required": false,
            "type": "string",
            "x-example": "57072d7e-92d4-11e7-abc4-cec278b6b50a"
          },
          {
            "name": "vf_ext_bp_id",
            "in": "header",
            "description": "A unique use case ID used for logging and end-to-end tracing.",
            "required": false,
            "type": "string",
            "x-example": "688c911a-92d4-11e7-abc4-cec278b6b50a"
          }
        ],
        "responses": {
          "204": {
            "description": "Successful status modification",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "400": {
            "description": "Request Error",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "404": {
            "description": "Not Found",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "405": {
            "description": "Method not Allowed",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "409": {
            "description": "Conflict",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "500": {
            "description": "The server encountered an unexpected condition which prevented it from fulfilling the request",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          }
        },
        "summary": "Update the information about a single top-up operation previously processed by the server.",
        "tags": [
          "Balance TopUps Methods"
        ],
        "security": [
          {
            "apix_oauth": [
              "PREPAY_BALANCE_MANAGEMENT_ALL",
              "TMF654_PREPAY_BALANCE_MANAGEMENT_ALL"
            ]
          }
        ]
      }
    },
    "/balanceAdjustment": {
      "get": {
        "operationId": "retrieveAdjustmentOperations",
        "description": "Retrieve the list of adjustment operations requested for a given product (or commercial id reference to a product), filtered by given criteria. The response includes the details of all balance adjustment operations requested",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "product.id",
            "description": "Id of the product",
            "required": true,
            "in": "query",
            "type": "string",
            "x-example": "ml123"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "* Contains the APIX OAuth token as Bearer token.\n* Enables the developer application access to the request resource.\n* E.g. Authorization:Bearer FhNX09SlBO4G0XRzTPAGustXtsWi",
            "required": true,
            "type": "string",
            "x-example": "Bearer FhNX09SlBO4G0XRzTPAGustXtsWi"
          },
          {
            "name": "Accept",
            "in": "header",
            "description": "The Accept request HTTP header advertises which content types, expressed as MIME types, the client is able to understand.",
            "required": false,
            "type": "string",
            "x-example": "application/json"
          },
          {
            "name": "vf-trace-transaction-id",
            "in": "header",
            "description": "* Consumer specified unique transaction identifier.\n * Enables requests from consumers to be captured end to end.\n* If not provided in the request, one is generated by the backend.\n * Format: Case insensitive, RFC 2616.",
            "required": false,
            "type": "string",
            "x-example": "57072d7e-92d4-11e7-abc4-cec278b6b50a"
          },
          {
            "name": "vf_ext_bp_id",
            "in": "header",
            "description": "A unique use case ID used for logging and end-to-end tracing.",
            "required": false,
            "type": "string",
            "x-example": "688c911a-92d4-11e7-abc4-cec278b6b50a"
          }
        ],
        "responses": {
          "200": {
            "description": "information successfully retrieved",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/BalanceAdjustmentRequest"
              }
            },
            "examples": {
              "application/json": [
                {
                  "type": "voice",
                  "reason": "text for reason of adjustment",
                  "amount": {
                    "amount": 10,
                    "units": "EUR"
                  },
                  "product": {
                    "id": "PRD1",
                    "href": "/productInventory/v1/product/PRD1",
                    "name": "Product name"
                  },
                  "id": "A1",
                  "href": "/balancemanagement/v1/balanceAdjustment/A1",
                  "description": "description text",
                  "requestor": {
                    "id": "osidfuosid",
                    "href": "http://server:port/partyManagement/user/osidfuosid",
                    "name": "John Recharger",
                    "role": "user"
                  },
                  "validFor": {
                    "startDateTime": "2018-07-24T15:02:49.529Z",
                    "endDateTime": "2018-07-24T15:02:49.529Z"
                  },
                  "requestedDate": "10-02-2016",
                  "bucket": {
                    "id": "BCKT11",
                    "href": "/balancemanagement/v1/bucket/BCKT11"
                  },
                  "partyAccount": {
                    "id": "ACC1",
                    "href": "/accountmanagement/v1/account/ACC1",
                    "name": "Party account name"
                  },
                  "relatedParty": [
                    {
                      "id": "cst1",
                      "href": "http://server:port/AccountManagement/customer/cst1",
                      "name": "John Doe",
                      "role": "customer"
                    }
                  ]
                }
              ]
            },
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "400": {
            "description": "Request Error",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "405": {
            "description": "Method not Allowed",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          },
          "500": {
            "description": "The server encountered an unexpected condition which prevented it from fulfilling the request",
            "headers": {
              "vf-trace-transaction-id": {
                "type": "string",
                "description": "A unique transaction ID. If provided, the same value is\r\n returned, Otherwise a new transaction id is generated."
              },
              "Content-Type": {
                "type": "string",
                "description": "Always \"application/json"
              },
              "Cache-Control": {
                "description": "Cache control header.",
                "type": "string"
              },
              "Expires": {
                "description": "Expiration header token.",
                "type": "string"
              },
              "Pragma": {
                "description": "to be picked from the backend if available otherwise set as \"no-cache\"",
                "type": "string"
              }
            }
          }
        },
        "summary": "Retrieve the list of adjustment operations requested for a given product (or commercial id reference to a product), filtered by given criteria. The response includes the details of all balance adjustment operations requested",
        "tags": [
          "Balance Adjustments Methods"
        ],
        "security": [
          {
            "apix_oauth": [
              "PREPAY_BALANCE_MANAGEMENT_ALL",
              "TMF654_PREPAY_BALANCE_MANAGEMENT_ALL"
            ]
          }
        ]
      }
    }
  },
  "schemes": [
    "https"
  ],
  "swagger": "2.0",
  "tags": [
    {
      "name": "Balance TopUps Methods",
      "description": "To be used typically by final users"
    },
    {
      "name": "Balance Adjustments Methods",
      "description": "To be used typically by final users"
    }
  ],
  "definitions": {
    "BalanceTopupBody": {
      "properties": {
        "type": {
          "type": "string",
          "description": "A preconfigured value that describes a TopUp type which determines the prepay balance bucket in which the top-up is done (national-voice, roaming-voice, promotional-voice, data, ....)"
        },
        "channel": {
          "$ref": "#/definitions/ChannelRefType",
          "description": "Indicator for the channel used to request the top-up operation. Structure including at least attribute \ufffdname\ufffd"
        },
        "amount": {
          "$ref": "#/definitions/QuantityType",
          "description": "Amount (can be monetary or non-monetary) to be recharged in the bucket"
        },
        "product": {
          "$ref": "#/definitions/ProductRefType",
          "description": "A reference to the product related to the bucket that is impacted by the balance related operation"
        }
      },
      "required": [
        "type",
        "channel",
        "amount"
      ]
    },
    "BalanceTopupRequest": {
      "allOf": [
        {
          "$ref": "#/definitions/BalanceTopupBody"
        }
      ],
      "description": "Represents a detailed description of a recharge operation requested over a bucket (defined by a specific product or reference to a product (i.e.: a commercial id such as an msisidn) and a service type)",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique Identifier within the server for the recharge operation request"
        },
        "href": {
          "type": "string",
          "description": "A resource URI pointing to the resource in the OB that stores the detailed information. This is typically the resource url to retrieve individual top-up operation details"
        },
        "description": {
          "type": "string",
          "description": "Description of the recharge operation"
        },
        "requestor": {
          "$ref": "#/definitions/RelatedPartyRefType",
          "description": "Identifier for the user/customer/entity that performs the top-up action. This can be used to indicate the identifier of an agent that performs the operation on behalf of a user via a customer service channel. Structure including at least attributes \ufffdrole\ufffd and \ufffdname\ufffd."
        },
        "isAutoTopup": {
          "type": "boolean",
          "description": "Indicates if the topup requested is an autotopup (to be processed periodically)"
        },
        "recurringPeriod": {
          "type": "string",
          "description": "For autotopup indicates the periodicity for the recharge operation (monthly, weekly, )"
        },
        "nrOfPeriods": {
          "type": "integer",
          "description": "For autotopup indicates the number of occurrences of the period the recharge operation must be executed. If not included then no limit is set to stop the executionof the topup every period"
        },
        "paymentMethod": {
          "$ref": "#/definitions/PaymentMethodRefOrValueType",
          "description": "Payment method used for the recharge operation (e.g.: cash, credit card, \ufffd). Structure including at least attribute \ufffdname\ufffd. Notice that the use of a voucher can be managed as a specific methodtype, where he voucher code can be passed as value."
        },
        "voucher": {
          "type": "string",
          "description": "Identifier for the voucher when the topup can be perfomed by this means (referenced by a voucher based payment mean). This attribute is left in this release to keep compatibility with previous version and for implementations that do not relay on paymentMethods. A voucher can be managed as a specific methodtype, where he voucher code can be passed as value."
        },
        "validFor": {
          "$ref": "#/definitions/TimePeriodType",
          "description": "The period defined for the recharged amount to be part of the prepay balance. This could be used to define expiration times to remove balance not consumed."
        },
        "requestedDate": {
          "type": "string",
          "description": "Date when the top-up request was received in the server"
        },
        "confirmationDate": {
          "type": "string",
          "description": "Date when the top-up was confirmed in the server"
        },
        "status": {
          "type": "string",
          "enum": [
            "confirmed",
            "cancelled",
            "in progress"
          ],
          "description": "Status of the top-up operation Supported values are: - confirmed - cancelled - in progress"
        },
        "bucket": {
          "$ref": "#/definitions/BucketBalanceRefType",
          "description": "A reference to the bucket impacted by the request. This is used in scenarios where the requestor knows beforehand the bucket that is going to be impacted instead of just referring to the commercial identifier of the impacted product and the type of bucket created under that product"
        },
        "partyAccount": {
          "$ref": "#/definitions/PartyAccountRefType",
          "description": "A reference to the account that owns the bucket impacted by the balance related operation"
        },
        "relatedParty": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RelatedPartyRefType"
          },
          "description": "Used to provide information about any other entity with relation to the operation"
        }
      },
      "required": [
        "id",
        "href",
        "validFor",
        "requestedDate",
        "confirmationDate",
        "status"
      ]
    },
    "BalanceAdjustmentBody": {
      "properties": {
        "type": {
          "type": "string",
          "description": "A preconfigured value that describes a TopUp type which determines the prepay balance bucket in which the top-up is done (national-voice, roaming-voice, promotional-voice, data, ....)"
        },
        "reason": {
          "type": "string",
          "description": "Text describing the reason for the adjustment"
        },
        "amount": {
          "$ref": "#/definitions/QuantityType",
          "description": "Amount (can be monetary or non-monetary) to be recharged in the bucket. It could refer to positive (increment) or negative (decrement) values"
        },
        "product": {
          "$ref": "#/definitions/ProductRefType",
          "description": "A reference to the product related to the bucket that is impacted by the balance related operation"
        }
      },
      "required": [
        "type",
        "reason",
        "amount"
      ]
    },
    "BalanceAdjustmentRequest": {
      "allOf": [
        {
          "$ref": "#/definitions/BalanceAdjustmentBody"
        }
      ],
      "description": "the BalanceAdjustment resource is a detailed description of credit adjustment operation erformed on a given bucket (defined by a specific product or reference to a product (i.e.: a commercial id such as an msisidn) and a service type)",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique Identifier within the server for the balance adjustment operation request"
        },
        "href": {
          "type": "string",
          "description": "A resource URI pointing to the resource in the OB that stores the detailed information. This is typically the resource url to retrieve individual top-up operation details"
        },
        "description": {
          "type": "string",
          "description": "Description of the recharge operation"
        },
        "requestor": {
          "$ref": "#/definitions/RelatedPartyRefType",
          "description": "Identifier for the user/customer/entity that performs the top-up action. This can be used to indicate the identifier of an agent that performs the operation on behalf of a user via a customer service channel. Structure including at least attributes \ufffdrole\ufffd and \ufffdname\ufffd."
        },
        "validFor": {
          "$ref": "#/definitions/TimePeriodType",
          "description": "The period defined for the adjusted amount to be part of the prepay balance. This could be used to define expiration times to remove balance not consumed."
        },
        "requestedDate": {
          "type": "string",
          "description": "Date when the top-up request was received in the server"
        },
        "bucket": {
          "$ref": "#/definitions/BucketBalanceRefType",
          "description": "A reference to the bucket impacted by the request. This is used in scenarios where the requestor knows beforehand the bucket that is going to be impacted instead of just referring to the commercial identifier of the impacted product and the type of bucket created under that product"
        },
        "partyAccount": {
          "$ref": "#/definitions/PartyAccountRefType",
          "description": "A reference to the account that owns the bucket impacted by the balance related operation"
        },
        "relatedParty": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RelatedPartyRefType"
          },
          "description": "Used to provide information about any other entity with relation to the operation"
        }
      },
      "required": [
        "id",
        "href",
        "requestedDate",
        "product"
      ]
    },
    "BalanceActivity": {
      "description": "The BalanceActivity resource is a detailed description of a specific balance-related action that has happened over a given bucket balance. Typically a recharge/transfer/adjustment request creates one activity, but a request for an auto-topup operation actually triggers multiple periodic balance-related activities.",
      "properties": {
        "type": {
          "type": "string",
          "description": "A preconfigured value that describes a type of balance-related performed (topup, transfer, adjustment)"
        },
        "date": {
          "type": "string",
          "description": "Date when the balance related operation took place"
        },
        "action": {
          "$ref": "#/definitions/BalanceActionRequestRefType",
          "description": "A reference to the balance-related operation that triggered the action"
        },
        "amount": {
          "$ref": "#/definitions/QuantityType",
          "description": "Amount (can be monetary or non-monetary) that was involved in the balance operation"
        },
        "bucketBalance": {
          "$ref": "#/definitions/BucketBalanceRefType",
          "description": "A reference to the bucket involved in the balance-related operation"
        },
        "amountBefore": {
          "$ref": "#/definitions/QuantityType",
          "description": "Remained amount in the bucket involved in the operation before it took place"
        },
        "amountAfter": {
          "$ref": "#/definitions/QuantityType",
          "description": "Remained amount in the bucket involved in the operation after it took place"
        },
        "product": {
          "$ref": "#/definitions/ProductRefType",
          "description": "A reference to the product related to the bucket that is impacted by the balance activity"
        },
        "partyAccount": {
          "$ref": "#/definitions/PartyAccountRefType",
          "description": "A reference to the account that owns the bucket impacted by the balance activity"
        },
        "relatedParty": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RelatedPartyRefType"
          },
          "description": "Used to provide information about any other entity with relation to the balance activity"
        }
      },
      "required": [
        "type",
        "date",
        "action",
        "amount",
        "bucketBalance",
        "product"
      ]
    },
    "BalanceActionRequestRefType": {
      "description": "link to the resource that holds balance-related request information",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the balance related action request"
        },
        "href": {
          "type": "string",
          "description": "A resource URI pointing to the resource in the OB that stores the request information for the balance-related action"
        }
      },
      "required": [
        "id",
        "href"
      ]
    },
    "ChannelRefType": {
      "description": "link to the resource that holds information about the channel used to initiate the topup operation request",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the channel entity"
        },
        "href": {
          "type": "string",
          "description": "A resource URI pointing to the resource in the OB that stores the channel information"
        },
        "name": {
          "type": "string",
          "description": "Name of the channel"
        }
      },
      "required": [
        "id",
        "href"
      ]
    },
    "PaymentMethodRefOrValueType": {
      "description": "link to the resource that holds information about the payment mean used to complete the operation",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the channel entity"
        },
        "href": {
          "type": "string",
          "description": "A resource URI pointing to the resource in the OB that stores the channel information"
        },
        "name": {
          "type": "string",
          "description": "Name of the channel"
        },
        "type": {
          "type": "string",
          "description": "Type of payment method (bankcard, voucher, ...)"
        },
        "details": {
          "$ref": "#/definitions/RelatedPartyRefType",
          "description": "The list of parameters depends on the type of payment method"
        }
      },
      "required": [
        "id",
        "href"
      ]
    },
    "BalanceTopupStatusTypeModify": {
      "properties": {
        "status": {
          "type": "string",
          "description": "Current status of the operation request"
        }
      },
      "required": [
        "status"
      ]
    },
    "BucketBalanceRefType": {
      "description": "link to the resource that holds bucket balance information",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the bucket entity"
        },
        "href": {
          "type": "string",
          "description": "A resource URI pointing to the resource in the OB that stores the balance information for a bucket"
        }
      },
      "required": [
        "id",
        "href"
      ]
    },
    "ProductRefType": {
      "description": "Representation of a resource that holds information about the product that is linked to the bucket balance.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product entity"
        },
        "href": {
          "type": "string",
          "description": "A resource URI pointing to the resource in the OB that stores the product information"
        },
        "name": {
          "type": "string",
          "description": "Name of the product"
        }
      },
      "required": [
        "id",
        "href"
      ]
    },
    "QuantityType": {
      "description": "Representation of a quantity of something. I can also be used to represent a quantity range",
      "properties": {
        "amount": {
          "format": "decimal",
          "type": "number",
          "description": "Measured amount"
        },
        "units": {
          "type": "string",
          "description": "Units the quantity is measured in"
        }
      },
      "required": [
        "units",
        "amount"
      ]
    },
    "TimePeriodType": {
      "description": "Representation of a time period",
      "properties": {
        "startDateTime": {
          "format": "date-time",
          "type": "string",
          "description": "Start date of the period"
        },
        "endDateTime": {
          "format": "date-time",
          "type": "string",
          "description": "End date of the period"
        }
      },
      "required": [
        "startDateTime"
      ]
    },
    "PartyAccountRefType": {
      "description": "Information about a resource that holds information about the account that owns the bucket",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the account entity"
        },
        "href": {
          "type": "string",
          "description": "A resource URI pointing to the resource in the OB that stores the account information"
        },
        "name": {
          "type": "string",
          "description": "Name of the account"
        }
      },
      "required": [
        "id",
        "href"
      ]
    },
    "RelatedPartyRefType": {
      "description": "Information about an associated entity and its role",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the account entity"
        },
        "href": {
          "type": "string",
          "description": "A resource URI pointing to the resource in the OB that stores the account information"
        },
        "name": {
          "type": "string",
          "description": "Name of the account"
        },
        "role": {
          "type": "string",
          "description": "Role describing the relationship with the related element"
        }
      },
      "required": [
        "role",
        "name"
      ]
    }
  }
}